<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; 潜在変数モデル – 教育測定学研究演習II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./summary.html" rel="next">
<link href="./path1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ffffa96520c6cf7ec6bfd4297e4347f0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-2bcba6c496c817d1f95d9bfa6227460e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./sem1.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">潜在変数モデル</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">教育測定学研究演習II</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">はじめに</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">オリエンテーション</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_basics1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><strong>R</strong>の基礎</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R_basics2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Rによるデータ分析</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">データハンドリング</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./path1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">パスモデル</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sem1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">潜在変数モデル</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#背景" id="toc-背景" class="nav-link active" data-scroll-target="#背景"><span class="header-section-number">6.0.1</span> 背景</a></li>
  <li><a href="#semの発展" id="toc-semの発展" class="nav-link" data-scroll-target="#semの発展"><span class="header-section-number">6.0.2</span> SEMの発展</a></li>
  <li><a href="#社会科学における潜在変数の必要性" id="toc-社会科学における潜在変数の必要性" class="nav-link" data-scroll-target="#社会科学における潜在変数の必要性"><span class="header-section-number">6.0.3</span> 社会科学における潜在変数の必要性</a></li>
  <li><a href="#semの普及と多様化" id="toc-semの普及と多様化" class="nav-link" data-scroll-target="#semの普及と多様化"><span class="header-section-number">6.0.4</span> SEMの普及と多様化</a></li>
  <li><a href="#確認的因子分析モデル" id="toc-確認的因子分析モデル" class="nav-link" data-scroll-target="#確認的因子分析モデル"><span class="header-section-number">6.0.5</span> 確認的因子分析モデル</a></li>
  <li><a href="#共分散構造分析" id="toc-共分散構造分析" class="nav-link" data-scroll-target="#共分散構造分析"><span class="header-section-number">6.0.6</span> 共分散構造分析</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">潜在変数モデル</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="背景" class="level3" data-number="6.0.1">
<h3 data-number="6.0.1" class="anchored" data-anchor-id="背景"><span class="header-section-number">6.0.1</span> 背景</h3>
<p>構造方程式モデル（SEM）は観測変数と観測されない潜在変数（構成概念）間の複雑な関係性を同時に分析する多変量統計手法です。 汎用的なモデル表現によって，多くの統計モデルを下位モデルとして包摂します。</p>
<p>因子分析と重回帰分析という2つの主要な多変量手法を統合しており，理論モデルを検証することが主な目的です。</p>
<p>観測不能な概念（例：幸福感，計算能力）をモデルに組み込むことが可能であり，測定誤差を明示的に考慮できる点にも特徴があります。何より，潜在変数を含む変数間の相互依存関係を同時に評価できる点に強みがあります。</p>
</section>
<section id="semの発展" class="level3" data-number="6.0.2">
<h3 data-number="6.0.2" class="anchored" data-anchor-id="semの発展"><span class="header-section-number">6.0.2</span> SEMの発展</h3>
<p>アメリカの遺伝学者Sewall Wrightが1918年にパス解析を開発し，当初は遺伝形質の継承パターンを分析するために利用されました。変数間のつながりを相関係数として定義し，グラフィカルモデル（パス図）を使用しました。</p>
<p>一方，Charles Spearman（1904年）やLouis Leon Thurstone（1935年）らが心理測定の領域で因子分析を開発しました。観測変数群の背後にある潜在的な「因子」を特定する手法です。これにより，知能や性格特性などの抽象概念の定量化が可能になります。</p>
<p>そして，経済システム内の複雑なネットワーク関係をマッピングする手法として主流となる，変数間の同時方程式モデルが経済学分野で開発されます。</p>
<p>パスモデル，因子分析，計量経済学の同時方程式モデルが統合され，観測変数と潜在変数の両方を含む複合的な分析が可能になりました。</p>
</section>
<section id="社会科学における潜在変数の必要性" class="level3" data-number="6.0.3">
<h3 data-number="6.0.3" class="anchored" data-anchor-id="社会科学における潜在変数の必要性"><span class="header-section-number">6.0.3</span> 社会科学における潜在変数の必要性</h3>
<p>社会科学の研究者の課題として，幸福感や購買意欲，景気，適性，能力など直接観測できない多くの抽象的な構成概念をモデル化する必要性が挙げられます。</p>
<p>1930年代，回答者の意見の方向性と強度を評価し，社会調査に広く採用されることとなるリッカート尺度 (Likert Scale)が開発されます。</p>
<p>観測不能な量（潜在変数）を複数の観測可能な代理変数，指標変数を通じて測定する「三角測量」のアプローチが確立されました。</p>
</section>
<section id="semの普及と多様化" class="level3" data-number="6.0.4">
<h3 data-number="6.0.4" class="anchored" data-anchor-id="semの普及と多様化"><span class="header-section-number">6.0.4</span> SEMの普及と多様化</h3>
<p>ソフトウェアの発展はめざましく，商用のソフトウェアとして， LISREL，AMOS (IBM-SPSS) といったグラフィカルユーザーインターフェースを備えたソフトウェアが登場し，SEMの利用が容易になりました。EQSやMplus，特にMplusには定評があります。</p>
<p>一方，オープンソースのソフトウェアとして，<strong>R</strong>では，<code>lavaan</code>，<code>OpenMx</code>，<code>semPLS</code>などが開発され，研究者にとって費用をかけずにSEMを実践できる環境が拡大しています。</p>
<p>応用分野も拡大しており，社会科学，行動科学，教育学，心理学，マーケティング，経営管理などから，工学，コンピュータサイエンス，生物学などの自然科学分野にまで広がっています。</p>
<p>SEMには * 潜在成長曲線 (Latent Growth Curve, LGC) モデル * ベイズSEM (Bayesian SEM, BSEM) * マルチレベル SEM (Multilevel SEM) などの発展がみられ，より複雑な理論モデルを分析できるようになっています。</p>
</section>
<section id="確認的因子分析モデル" class="level3" data-number="6.0.5">
<h3 data-number="6.0.5" class="anchored" data-anchor-id="確認的因子分析モデル"><span class="header-section-number">6.0.5</span> 確認的因子分析モデル</h3>
<p>潜在変数モデルの基本形として，<strong>確認的因子分析モデル</strong>（Confirmatory Factor Analysis; CFA）を実行します。</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">require</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: tidyverse</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">require</span>(lavaan)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lavaan
This is lavaan 0.6-19
lavaan is FREE software! Please report any bugs.</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>flnm <span class="ot">&lt;-</span> <span class="st">"~/Downloads/personality.xlsx"</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>tbl_personality <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(flnm)</span>
<span id="cb6-3"><a href="#cb6-3"></a>tbl_personality <span class="ot">&lt;-</span> tbl_personality <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">rename</span>(</span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="at">Agr1 =</span> 関係1, <span class="at">Con1 =</span> 意志1, <span class="at">Ext1 =</span> 活動1, <span class="at">Emo1 =</span> 情動1, <span class="at">Int1 =</span> 堅実1,</span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="at">Agr2 =</span> 関係2, <span class="at">Con2 =</span> 意志2, <span class="at">Ext2 =</span> 活動2, <span class="at">Emo2 =</span> 情動2, <span class="at">Int2 =</span> 堅実2,</span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="at">Agr3 =</span> 関係3, <span class="at">Con3 =</span> 意志3, <span class="at">Ext3 =</span> 活動3, <span class="at">Emo3 =</span> 情動3, <span class="at">Int3 =</span> 堅実3,</span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="at">Agr4 =</span> 関係4, <span class="at">Con4 =</span> 意志4, <span class="at">Ext4 =</span> 活動4, <span class="at">Emo4 =</span> 情動4, <span class="at">Int4 =</span> 堅実4,</span>
<span id="cb6-9"><a href="#cb6-9"></a>    <span class="at">Agr5 =</span> 関係5, <span class="at">Con5 =</span> 意志5, <span class="at">Ext5 =</span> 活動5, <span class="at">Emo5 =</span> 情動5, <span class="at">Int5 =</span> 堅実5</span>
<span id="cb6-10"><a href="#cb6-10"></a>    )</span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="co"># Agreeableness       関係</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="co"># Conscientiousness   意志</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>  <span class="co"># Extraversion        活動</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  <span class="co"># Emotional Stability 情動</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="co"># Intellect           堅実</span></span>
<span id="cb6-16"><a href="#cb6-16"></a>mdl_personality <span class="ot">&lt;-</span> <span class="st">'</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="st">  Agr =~ Agr1 + Agr2 + Agr3 + Agr4 + Agr5</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="st">  Con =~ Con1 + Con2 + Con3 + Con4 + Con5</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="st">  Ext =~ Ext1 + Ext2 + Ext3 + Ext4 + Ext5</span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="st">  Emo =~ Emo1 + Emo2 + Emo3 + Emo4 + Emo5</span></span>
<span id="cb6-21"><a href="#cb6-21"></a><span class="st">  Int =~ Int1 + Int2 + Int3 + Int4 + Int5</span></span>
<span id="cb6-22"><a href="#cb6-22"></a><span class="st">'</span></span>
<span id="cb6-23"><a href="#cb6-23"></a>rslt_personality <span class="ot">&lt;-</span></span>
<span id="cb6-24"><a href="#cb6-24"></a>  <span class="fu">cfa</span>(<span class="at">model =</span> mdl_personality, <span class="at">data =</span> tbl_personality) <span class="co"># std.lv</span></span>
<span id="cb6-25"><a href="#cb6-25"></a><span class="fu">summary</span>(rslt_personality, <span class="at">standard =</span> <span class="cn">TRUE</span>, <span class="at">rsquare =</span> <span class="cn">TRUE</span>, <span class="at">ci =</span> <span class="cn">TRUE</span>, <span class="at">fit.measure =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>lavaan 0.6-19 ended normally after 56 iterations

  Estimator                                         ML
  Optimization method                           NLMINB
  Number of model parameters                        60

  Number of observations                          2236

Model Test User Model:
                                                      
  Test statistic                              3843.296
  Degrees of freedom                               265
  P-value (Chi-square)                           0.000

Model Test Baseline Model:

  Test statistic                             16560.077
  Degrees of freedom                               300
  P-value                                        0.000

User Model versus Baseline Model:

  Comparative Fit Index (CFI)                    0.780
  Tucker-Lewis Index (TLI)                       0.751

Loglikelihood and Information Criteria:

  Loglikelihood user model (H0)             -91289.278
  Loglikelihood unrestricted model (H1)     -89367.630
                                                      
  Akaike (AIC)                              182698.556
  Bayesian (BIC)                            183041.303
  Sample-size adjusted Bayesian (SABIC)     182850.673

Root Mean Square Error of Approximation:

  RMSEA                                          0.078
  90 Percent confidence interval - lower         0.076
  90 Percent confidence interval - upper         0.080
  P-value H_0: RMSEA &lt;= 0.050                    0.000
  P-value H_0: RMSEA &gt;= 0.080                    0.042

Standardized Root Mean Square Residual:

  SRMR                                           0.076

Parameter Estimates:

  Standard errors                             Standard
  Information                                 Expected
  Information saturated (h1) model          Structured

Latent Variables:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
  Agr =~                                                                
    Agr1              1.000                               1.000    1.000
    Agr2             -1.595    0.119  -13.378    0.000   -1.829   -1.361
    Agr3             -2.077    0.151  -13.791    0.000   -2.373   -1.782
    Agr4             -1.583    0.127  -12.502    0.000   -1.831   -1.334
    Agr5             -1.852    0.136  -13.579    0.000   -2.119   -1.585
  Con =~                                                                
    Con1              1.000                               1.000    1.000
    Con2              1.162    0.063   18.575    0.000    1.039    1.285
    Con3              1.085    0.060   18.025    0.000    0.967    1.202
    Con4             -1.456    0.072  -20.321    0.000   -1.596   -1.315
    Con5             -1.554    0.080  -19.339    0.000   -1.712   -1.397
  Ext =~                                                                
    Ext1              1.000                               1.000    1.000
    Ext2              1.229    0.054   22.760    0.000    1.123    1.334
    Ext3             -0.955    0.044  -21.821    0.000   -1.040   -0.869
    Ext4             -1.132    0.049  -22.933    0.000   -1.229   -1.036
    Ext5             -0.823    0.041  -19.948    0.000   -0.904   -0.743
  Emo =~                                                                
    Emo1              1.000                               1.000    1.000
    Emo2              0.951    0.025   37.549    0.000    0.902    1.001
    Emo3              0.897    0.026   34.192    0.000    0.846    0.949
    Emo4              0.694    0.026   26.358    0.000    0.642    0.746
    Emo5              0.642    0.028   23.208    0.000    0.588    0.696
  Int =~                                                                
    Int1              1.000                               1.000    1.000
    Int2             -1.058    0.072  -14.654    0.000   -1.200   -0.917
    Int3              1.368    0.075   18.182    0.000    1.221    1.516
    Int4              0.413    0.049    8.390    0.000    0.317    0.510
    Int5             -1.006    0.064  -15.717    0.000   -1.131   -0.880
   Std.lv  Std.all
                  
    0.460    0.330
   -0.734   -0.634
   -0.955   -0.741
   -0.728   -0.503
   -0.852   -0.678
                  
    0.652    0.536
    0.758    0.578
    0.707    0.550
   -0.949   -0.697
   -1.014   -0.622
                  
    0.907    0.560
    1.114    0.694
   -0.866   -0.645
   -1.027   -0.704
   -0.746   -0.561
                  
    1.284    0.821
    1.222    0.796
    1.152    0.722
    0.891    0.571
    0.825    0.509
                  
    0.629    0.562
   -0.666   -0.431
    0.861    0.722
    0.260    0.221
   -0.633   -0.476

Covariances:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
  Agr ~~                                                                
    Con              -0.098    0.011   -8.529    0.000   -0.120   -0.075
    Ext               0.289    0.025   11.452    0.000    0.239    0.338
    Emo               0.122    0.018    6.855    0.000    0.087    0.157
    Int              -0.078    0.011   -7.371    0.000   -0.098   -0.057
  Con ~~                                                                
    Ext              -0.213    0.020  -10.607    0.000   -0.252   -0.173
    Emo              -0.234    0.025   -9.499    0.000   -0.282   -0.186
    Int               0.117    0.014    8.374    0.000    0.089    0.144
  Ext ~~                                                                
    Emo               0.272    0.032    8.424    0.000    0.209    0.335
    Int              -0.256    0.022  -11.765    0.000   -0.298   -0.213
  Emo ~~                                                                
    Int              -0.092    0.023   -4.036    0.000   -0.137   -0.047
   Std.lv  Std.all
                  
   -0.326   -0.326
    0.693    0.693
    0.207    0.207
   -0.268   -0.268
                  
   -0.360   -0.360
   -0.279   -0.279
    0.284    0.284
                  
    0.234    0.234
   -0.448   -0.448
                  
   -0.114   -0.114

Variances:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
   .Agr1              1.725    0.053   32.366    0.000    1.621    1.830
   .Agr2              0.800    0.029   27.408    0.000    0.742    0.857
   .Agr3              0.749    0.033   22.455    0.000    0.683    0.814
   .Agr4              1.566    0.051   30.453    0.000    1.465    1.667
   .Agr5              0.851    0.033   25.743    0.000    0.786    0.916
   .Con1              1.054    0.036   29.030    0.000    0.983    1.125
   .Con2              1.144    0.041   27.927    0.000    1.064    1.225
   .Con3              1.156    0.040   28.702    0.000    1.077    1.235
   .Con4              0.955    0.041   23.026    0.000    0.874    1.036
   .Con5              1.627    0.061   26.462    0.000    1.506    1.747
   .Ext1              1.795    0.060   29.892    0.000    1.678    1.913
   .Ext2              1.336    0.051   26.168    0.000    1.236    1.436
   .Ext3              1.052    0.038   27.886    0.000    0.978    1.126
   .Ext4              1.074    0.042   25.751    0.000    0.992    1.156
   .Ext5              1.211    0.041   29.874    0.000    1.132    1.291
   .Emo1              0.797    0.038   20.788    0.000    0.722    0.872
   .Emo2              0.862    0.038   22.748    0.000    0.787    0.936
   .Emo3              1.219    0.045   26.884    0.000    1.131    1.308
   .Emo4              1.640    0.054   30.599    0.000    1.535    1.745
   .Emo5              1.950    0.062   31.403    0.000    1.828    2.071
   .Int1              0.858    0.033   26.204    0.000    0.794    0.922
   .Int2              1.945    0.065   30.040    0.000    1.818    2.072
   .Int3              0.682    0.040   17.205    0.000    0.604    0.760
   .Int4              1.313    0.040   32.692    0.000    1.235    1.392
   .Int5              1.366    0.047   29.009    0.000    1.274    1.458
    Agr               0.212    0.030    7.164    0.000    0.154    0.269
    Con               0.425    0.036   11.849    0.000    0.355    0.496
    Ext               0.822    0.063   13.047    0.000    0.698    0.945
    Emo               1.649    0.075   21.871    0.000    1.502    1.797
    Int               0.396    0.034   11.622    0.000    0.329    0.463
   Std.lv  Std.all
    1.725    0.891
    0.800    0.598
    0.749    0.451
    1.566    0.747
    0.851    0.540
    1.054    0.713
    1.144    0.666
    1.156    0.698
    0.955    0.514
    1.627    0.613
    1.795    0.686
    1.336    0.519
    1.052    0.584
    1.074    0.505
    1.211    0.685
    0.797    0.326
    0.862    0.366
    1.219    0.479
    1.640    0.674
    1.950    0.741
    0.858    0.684
    1.945    0.814
    0.682    0.479
    1.313    0.951
    1.366    0.773
    1.000    1.000
    1.000    1.000
    1.000    1.000
    1.000    1.000
    1.000    1.000

R-Square:
                   Estimate
    Agr1              0.109
    Agr2              0.402
    Agr3              0.549
    Agr4              0.253
    Agr5              0.460
    Con1              0.287
    Con2              0.334
    Con3              0.302
    Con4              0.486
    Con5              0.387
    Ext1              0.314
    Ext2              0.481
    Ext3              0.416
    Ext4              0.495
    Ext5              0.315
    Emo1              0.674
    Emo2              0.634
    Emo3              0.521
    Emo4              0.326
    Emo5              0.259
    Int1              0.316
    Int2              0.186
    Int3              0.521
    Int4              0.049
    Int5              0.227</code></pre>
</div>
</div>
<p>適合度の一覧は関数<code>fitMeasures()</code>で得られます。</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">fitMeasures</span>(rslt_personality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                 npar                  fmin                 chisq 
               60.000                 0.859              3843.296 
                   df                pvalue        baseline.chisq 
              265.000                 0.000             16560.077 
          baseline.df       baseline.pvalue                   cfi 
              300.000                 0.000                 0.780 
                  tli                  nnfi                   rfi 
                0.751                 0.751                 0.737 
                  nfi                  pnfi                   ifi 
                0.768                 0.678                 0.780 
                  rni                  logl     unrestricted.logl 
                0.780            -91289.278            -89367.630 
                  aic                   bic                ntotal 
           182698.556            183041.303              2236.000 
                 bic2                 rmsea        rmsea.ci.lower 
           182850.673                 0.078                 0.076 
       rmsea.ci.upper        rmsea.ci.level          rmsea.pvalue 
                0.080                 0.900                 0.000 
       rmsea.close.h0 rmsea.notclose.pvalue     rmsea.notclose.h0 
                0.050                 0.042                 0.080 
                  rmr            rmr_nomean                  srmr 
                0.156                 0.156                 0.076 
         srmr_bentler   srmr_bentler_nomean                  crmr 
                0.076                 0.076                 0.079 
          crmr_nomean            srmr_mplus     srmr_mplus_nomean 
                0.079                 0.076                 0.076 
                cn_05                 cn_01                   gfi 
              177.847               188.033                 0.862 
                 agfi                  pgfi                   mfi 
                0.830                 0.703                 0.449 
                 ecvi 
                1.772 </code></pre>
</div>
</div>
<p>以下のようにすれば，特定の適合度指標を表示します。</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">fitMeasures</span>(rslt_personality, <span class="fu">c</span>(<span class="st">"chisq"</span>, <span class="st">"df"</span>, <span class="st">"cfi"</span>, <span class="st">"rmsea"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   chisq       df      cfi    rmsea 
3843.296  265.000    0.780    0.078 </code></pre>
</div>
</div>
</section>
<section id="共分散構造分析" class="level3" data-number="6.0.6">
<h3 data-number="6.0.6" class="anchored" data-anchor-id="共分散構造分析"><span class="header-section-number">6.0.6</span> 共分散構造分析</h3>
<p>情動を他の因子で説明するモデルを分析してみましょう。</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>mdl_prsn_sem <span class="ot">&lt;-</span> <span class="st">'</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">  Agr =~ Agr1 + Agr2 + Agr3 + Agr4 + Agr5</span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="st">  Con =~ Con1 + Con2 + Con3 + Con4 + Con5</span></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="st">  Ext =~ Ext1 + Ext2 + Ext3 + Ext4 + Ext5</span></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="st">  Emo =~ Emo1 + Emo2 + Emo3 + Emo4 + Emo5</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="st">  Int =~ Int1 + Int2 + Int3 + Int4 + Int5</span></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="st">  Emo ~ Agr + Con + Ext + Int</span></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="st">'</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>rslt_prsn_sem <span class="ot">&lt;-</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>  <span class="fu">cfa</span>(<span class="at">model =</span> mdl_prsn_sem, <span class="at">data =</span> tbl_personality)</span>
<span id="cb12-11"><a href="#cb12-11"></a><span class="fu">summary</span>(rslt_prsn_sem, <span class="at">standard =</span> <span class="cn">TRUE</span>, <span class="at">rsquare =</span> <span class="cn">TRUE</span>, <span class="at">ci =</span> <span class="cn">TRUE</span>, <span class="at">fit.measure =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>lavaan 0.6-19 ended normally after 63 iterations

  Estimator                                         ML
  Optimization method                           NLMINB
  Number of model parameters                        60

  Number of observations                          2236

Model Test User Model:
                                                      
  Test statistic                              3843.296
  Degrees of freedom                               265
  P-value (Chi-square)                           0.000

Model Test Baseline Model:

  Test statistic                             16560.077
  Degrees of freedom                               300
  P-value                                        0.000

User Model versus Baseline Model:

  Comparative Fit Index (CFI)                    0.780
  Tucker-Lewis Index (TLI)                       0.751

Loglikelihood and Information Criteria:

  Loglikelihood user model (H0)             -91289.278
  Loglikelihood unrestricted model (H1)     -89367.630
                                                      
  Akaike (AIC)                              182698.556
  Bayesian (BIC)                            183041.303
  Sample-size adjusted Bayesian (SABIC)     182850.673

Root Mean Square Error of Approximation:

  RMSEA                                          0.078
  90 Percent confidence interval - lower         0.076
  90 Percent confidence interval - upper         0.080
  P-value H_0: RMSEA &lt;= 0.050                    0.000
  P-value H_0: RMSEA &gt;= 0.080                    0.042

Standardized Root Mean Square Residual:

  SRMR                                           0.076

Parameter Estimates:

  Standard errors                             Standard
  Information                                 Expected
  Information saturated (h1) model          Structured

Latent Variables:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
  Agr =~                                                                
    Agr1              1.000                               1.000    1.000
    Agr2             -1.595    0.119  -13.378    0.000   -1.829   -1.361
    Agr3             -2.077    0.151  -13.791    0.000   -2.373   -1.782
    Agr4             -1.583    0.127  -12.502    0.000   -1.831   -1.334
    Agr5             -1.852    0.136  -13.579    0.000   -2.119   -1.585
  Con =~                                                                
    Con1              1.000                               1.000    1.000
    Con2              1.162    0.063   18.575    0.000    1.039    1.285
    Con3              1.085    0.060   18.025    0.000    0.967    1.202
    Con4             -1.456    0.072  -20.321    0.000   -1.596   -1.315
    Con5             -1.554    0.080  -19.339    0.000   -1.712   -1.397
  Ext =~                                                                
    Ext1              1.000                               1.000    1.000
    Ext2              1.229    0.054   22.760    0.000    1.123    1.334
    Ext3             -0.955    0.044  -21.821    0.000   -1.040   -0.869
    Ext4             -1.132    0.049  -22.933    0.000   -1.229   -1.036
    Ext5             -0.823    0.041  -19.949    0.000   -0.904   -0.743
  Emo =~                                                                
    Emo1              1.000                               1.000    1.000
    Emo2              0.951    0.025   37.549    0.000    0.902    1.001
    Emo3              0.897    0.026   34.192    0.000    0.846    0.949
    Emo4              0.694    0.026   26.358    0.000    0.642    0.746
    Emo5              0.642    0.028   23.208    0.000    0.588    0.696
  Int =~                                                                
    Int1              1.000                               1.000    1.000
    Int2             -1.058    0.072  -14.655    0.000   -1.200   -0.917
    Int3              1.368    0.075   18.182    0.000    1.221    1.515
    Int4              0.413    0.049    8.390    0.000    0.317    0.510
    Int5             -1.006    0.064  -15.717    0.000   -1.131   -0.880
   Std.lv  Std.all
                  
    0.460    0.330
   -0.734   -0.634
   -0.955   -0.741
   -0.728   -0.503
   -0.852   -0.678
                  
    0.652    0.536
    0.758    0.578
    0.707    0.550
   -0.949   -0.697
   -1.014   -0.622
                  
    0.907    0.560
    1.114    0.694
   -0.866   -0.645
   -1.027   -0.704
   -0.746   -0.561
                  
    1.284    0.821
    1.222    0.796
    1.152    0.722
    0.891    0.571
    0.825    0.509
                  
    0.629    0.562
   -0.666   -0.431
    0.861    0.722
    0.260    0.221
   -0.633   -0.476

Regressions:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
  Emo ~                                                                 
    Agr               0.144    0.119    1.209    0.227   -0.090    0.379
    Con              -0.438    0.060   -7.306    0.000   -0.556   -0.321
    Ext               0.179    0.067    2.679    0.007    0.048    0.311
    Int               0.040    0.067    0.598    0.550   -0.091    0.171
   Std.lv  Std.all
                  
    0.052    0.052
   -0.222   -0.222
    0.127    0.127
    0.020    0.020

Covariances:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
  Agr ~~                                                                
    Con              -0.098    0.011   -8.529    0.000   -0.120   -0.075
    Ext               0.289    0.025   11.452    0.000    0.239    0.338
    Int              -0.078    0.011   -7.371    0.000   -0.098   -0.057
  Con ~~                                                                
    Ext              -0.213    0.020  -10.607    0.000   -0.252   -0.173
    Int               0.117    0.014    8.374    0.000    0.089    0.144
  Ext ~~                                                                
    Int              -0.256    0.022  -11.765    0.000   -0.298   -0.213
   Std.lv  Std.all
                  
   -0.326   -0.326
    0.693    0.693
   -0.268   -0.268
                  
   -0.360   -0.360
    0.284    0.284
                  
   -0.448   -0.448

Variances:
                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper
   .Agr1              1.725    0.053   32.366    0.000    1.621    1.830
   .Agr2              0.800    0.029   27.409    0.000    0.743    0.857
   .Agr3              0.749    0.033   22.455    0.000    0.683    0.814
   .Agr4              1.566    0.051   30.453    0.000    1.465    1.667
   .Agr5              0.851    0.033   25.742    0.000    0.786    0.916
   .Con1              1.054    0.036   29.030    0.000    0.983    1.125
   .Con2              1.144    0.041   27.927    0.000    1.064    1.225
   .Con3              1.156    0.040   28.702    0.000    1.077    1.235
   .Con4              0.955    0.041   23.026    0.000    0.874    1.036
   .Con5              1.627    0.061   26.462    0.000    1.506    1.747
   .Ext1              1.795    0.060   29.892    0.000    1.678    1.913
   .Ext2              1.336    0.051   26.168    0.000    1.236    1.436
   .Ext3              1.052    0.038   27.886    0.000    0.978    1.126
   .Ext4              1.074    0.042   25.751    0.000    0.992    1.156
   .Ext5              1.211    0.041   29.874    0.000    1.132    1.291
   .Emo1              0.797    0.038   20.788    0.000    0.722    0.872
   .Emo2              0.862    0.038   22.748    0.000    0.787    0.936
   .Emo3              1.219    0.045   26.884    0.000    1.131    1.308
   .Emo4              1.640    0.054   30.599    0.000    1.535    1.745
   .Emo5              1.949    0.062   31.403    0.000    1.828    2.071
   .Int1              0.858    0.033   26.203    0.000    0.794    0.922
   .Int2              1.945    0.065   30.040    0.000    1.818    2.072
   .Int3              0.682    0.040   17.206    0.000    0.604    0.760
   .Int4              1.313    0.040   32.692    0.000    1.235    1.392
   .Int5              1.366    0.047   29.009    0.000    1.274    1.458
    Agr               0.212    0.030    7.164    0.000    0.154    0.269
    Con               0.425    0.036   11.849    0.000    0.355    0.496
    Ext               0.822    0.063   13.047    0.000    0.698    0.945
   .Emo               1.484    0.069   21.358    0.000    1.348    1.620
    Int               0.396    0.034   11.623    0.000    0.329    0.463
   Std.lv  Std.all
    1.725    0.891
    0.800    0.598
    0.749    0.451
    1.566    0.747
    0.851    0.540
    1.054    0.713
    1.144    0.666
    1.156    0.698
    0.955    0.514
    1.627    0.613
    1.795    0.686
    1.336    0.519
    1.052    0.584
    1.074    0.505
    1.211    0.685
    0.797    0.326
    0.862    0.366
    1.219    0.479
    1.640    0.674
    1.949    0.741
    0.858    0.684
    1.945    0.814
    0.682    0.479
    1.313    0.951
    1.366    0.773
    1.000    1.000
    1.000    1.000
    1.000    1.000
    0.900    0.900
    1.000    1.000

R-Square:
                   Estimate
    Agr1              0.109
    Agr2              0.402
    Agr3              0.549
    Agr4              0.253
    Agr5              0.460
    Con1              0.287
    Con2              0.334
    Con3              0.302
    Con4              0.486
    Con5              0.387
    Ext1              0.314
    Ext2              0.481
    Ext3              0.416
    Ext4              0.495
    Ext5              0.315
    Emo1              0.674
    Emo2              0.634
    Emo3              0.521
    Emo4              0.326
    Emo5              0.259
    Int1              0.316
    Int2              0.186
    Int3              0.521
    Int4              0.049
    Int5              0.227
    Emo               0.100</code></pre>
</div>
</div>
<p>パス図を出力するパッケージ<code>semPlot</code>を利用します。</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">require</span>(semPlot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: semPlot</code></pre>
</div>
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">semPaths</span>(rslt_prsn_sem, <span class="co"># 以下はおすすめ設定</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="at">what =</span> <span class="st">"std"</span>, <span class="at">style =</span> <span class="st">"lisrel"</span>,</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="co">#edge.label.cex = 2,</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="at">edge.color =</span> <span class="st">"black"</span>, <span class="at">fade =</span> <span class="cn">FALSE</span>,</span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="at">nCharNodes =</span> <span class="dv">0</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="co">#,sizeMan = 10, esize = 3 # 適宜変更</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="sem1_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./path1.html" class="pagination-link" aria-label="パスモデル">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">パスモデル</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./summary.html" class="pagination-link" aria-label="Summary">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Summary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>